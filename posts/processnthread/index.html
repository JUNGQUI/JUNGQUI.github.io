<!DOCTYPE html>
<html lang="en" data-theme=""><head>
    <title> QUEUEZ | ProcessNthread </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.74.3" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="배울게 너무 많아 항상 부족함을 느끼는 개발자입니다.">
    
    <link rel="stylesheet" href="https://jungqui.github.io/css/style.min.5be3a155aa89a24586c761b1b5538c4040e3735ee32ac12a708dc1696c0982f5.css" integrity="sha256-W&#43;OhVaqJokWGx2GxtVOMQEDjc17jKsEqcI3BaWwJgvU=" crossorigin="anonymous" type="text/css"><link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    
    <link rel="shortcut icon" href="https://jungqui.github.io/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://jungqui.github.io/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://jungqui.github.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://jungqui.github.io/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://jungqui.github.io/posts/processnthread/">
    
    
    <script type="text/javascript" src="https://jungqui.github.io/js/anatole-header.min.7e2fc0724240b28c6e214687e73a4a6eb6c196bbace546b9dc86e94cca120b5c.js" integrity="sha256-fi/AckJAsoxuIUaH5zpKbrbBlrus5Ua53IbpTMoSC1w=" crossorigin="anonymous"></script>
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jungqui.github.io/images/site-feature-image.png"/>

<meta name="twitter:title" content="ProcessNthread"/>
<meta name="twitter:description" content="Program? Process? Thread? Program 다음은 나무 위키에서의 program 에 대한 정의 중 일부 발췌문이다."/>

</head><body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src="https://jungqui.github.io/images/dedsec.png" alt="profile picture">
        <h3 title=""><a href="/">QUEUEZ DEV LOG</a></h3>
        <div class="description">
          <p>배울게 너무 많아 항상 부족함을 느끼는 개발자입니다.</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
        
        <li>
        <a href="https://github.com/JUNGQUI" rel="me" aria-label="GitHub">
          <i class="fa fa-2x fa-github" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="mailto:ljk2518@gmail.com" rel="me" aria-label="e-mail">
          <i class="fa fa-2x fa-envelope" aria-hidden="true"></i>
        </a>          
        </li>

        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; QUEUEZ 2020 </div>
      </div>
    </div>
</div><div class="main">
            <div class="page-top animated fadeInDown">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    <ul class="nav" id="navMenu">
        
        
        
        <li><a  href="/"  title="">Home</a></li>
        
        
        <li><a  href="/posts/"  title="">Posts</a></li>
        
        
        <li class="theme-switch-item">
        <a class="theme-switch" title="Switch Theme">
            <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
        </a>
        </li>
    </ul>
</div>

            <div class="autopagerize_page_element">
                <div class="content">
<div class="post animated fadeInDown">
    <div class="post-content">

      <div class="post-title">
        <h3>ProcessNthread
        </h3>
        
        </div>

    <h4 id="program-process-thread">Program? Process? Thread?</h4>
<h3 id="program">Program</h3>
<p>다음은 나무 위키에서의 program 에 대한 정의 중 일부 발췌문이다.</p>
<blockquote>
<p>컴퓨터에서 실행될 때 특정 작업(specific task)을 수행하는 일련의 명령어들의 모음(집합체)이다.</p>
</blockquote>
<p>이와 같이 &lsquo;어떠한 목적&rsquo; 을 수행하기 위한 명령어들로 이루어진 모음이다.</p>
<h3 id="process">Process</h3>
<p>Program 이 어떠한 목적을 이루기 위해 여러 task 를 잘게 쪼개놓은 것이다. 사전적 의미로는 이렇지만 실제로 보면 사실상 process 가 program 이지 않을까 한다.</p>
<p>개인적인 생각엔 최근에는 Program 은 사람이 인식하여 실행할 수 있는 단위 (ex : 카카오톡) 으로 인식되고
실제 CPU 등 pc resource 에 대해 소모하는 단위가 process 이지 않나 하는 생각이 든다.</p>
<p>자원에 대해 소모하는 단위라고 말했듯이 하나의 process 가 떠진 상태라면 OS 로부터 해당 작업에 대해 자원을 할당받았다고 할 수 있다.
또한 각기 process 가 독립적인 단위이므로 OS 로부터 독립적인 자원을 받는다.</p>
<p>흔히 말하는 Multi-process 에서는 이때 하나의 program 의 실행에 대해 process가 여러가지 만들어지는데
이 때 CPU core 는 A process 를 실행하던 도중 B process 를 실행 할때 context-switching 이 발생한다.</p>
<p>context-switching 은 사람으로 치자면 신문을 읽다가 TV 를 본다고 할 때
신문을 읽던 주제에 대해 생각하던 도중 TV에서 방영하는 프로그램<del>드라마등</del> 에 적응하는 과정이라고 볼 수 있는데,
이 때 사람의 두뇌는 글자를 읽다가 영상물을 읽게끔 인식의 전환이 일어난다<del>고 한다</del>. 이를 context-switching 이라 볼 수 있고,
이 때 CPU 는 물리적으로 다른 위치에 access 하여 code 를 읽고 다시 진행 상황에 대해 인지해야 하기 때문에 자원 소모가 발생한다.</p>
<p>당연히 이와 같은 context-switching 이 자주 일어나면 자원 낭비가 심해진다.</p>
<h3 id="thread">Thread</h3>
<p>multi-process 의 context-switching 의 대항마. 사람 입장에서는 process 나 thread 나 하는 일은 동잏하다. 다만 구조가 다른데
process 가 program의 단위라면 thread 는 process 의 단위이다.</p>
<p>추가로 다른 점은 자원에 대한 공유 이다.</p>
<p>process 가 program 을 실행 시 OS 로부터 각기 다른 자원을 할당 받는 반면, thread 의 경우 work 를 위해 process 내의 공유 자원을 이용해서 처리를 하기 때문에
context-switching 이 일어나지 않는다.</p>
<h2 id="넘어가기-전">넘어가기 전</h2>
<p>사실 process 와 jvm 을 공부하면서 이게 뭔 소리인가 싶은 부분이 있었다. process 가 일을 하는 단위고, process 내의 task 단위가 thread 라 하였는데, jvm 은 또 그럼 무엇이며 그 안의 thread 는 또 무엇인가.</p>
<p>이 부분에 대해 굉장히 헤매었는데 단정적으로 결론 짓자면 <code>InstanceOf process == InstanceOf JVM ? &quot;긍정&quot; : &quot;부정&quot;</code> 이라는 것이다.
Java program 을 실행 시 OS 와 상관 없이 돌릴 수 있는 것이 JVM 인데, 이것이 Program 을 돌리는 process 역할을 한다. 그러나 완벽하게 동일한 구성으로 기능하지 않기 때문에 같진 않지만 &lsquo;비슷하다&rsquo; 라고 이야기 할 수 있을 것 같다.</p>
<h2 id="왜-알아야-하나">왜 알아야 하나?</h2>
<p>Java 가 <del>(전 Java 진영이기 때문에)</del> 아무리 resource 에 대해 처리를 잘해준다고 하더라도 그게 곧 resource 구성에 대해 <code>몰라도 된다</code> 는 아니다.
오히려 그렇기 때문에 더 잘 알아야 하고 어떤 기술이 있는지, 왜 쓰는지에 대해 알아야 적재적소에 기술을 배치 할 수 있다.</p>
<p>개발계에 <del>필자가 미는</del> 명언이 있는데, <code>개발에 정답은 없어도 최선은 있다</code> 라는 것이다.</p>
<p>단순 for문만 사용해서, 혹은 iterator 를 사용해서 반복문에 대한 처리는 가능하다.</p>
<p>다만 이를 어떤걸 써야 resource 적인 소모가 적은지, 그렇게 해서 latency 나 performance 를 얼마나 끌어 올릴 수 있을 것인지 에 대해서 인지 해야 기술을 사용할 때 선택을 할 수 있고 이것이 개발자의 능력이라고 생각한다.</p>
<h2 id="구성">구성</h2>
<h3 id="process-1">Process</h3>
<p>process 는 <code>code</code>, <code>data</code>, <code>stack</code>, <code>heap</code> 의 영역으로 나뉘어져 있고, 다른 process 에 대해 접근할 경우 pipe, socket 통신 등의 방법을 이용해서
접근해야 해당 자원에 대해 접근 할 수 있다.</p>
<p>괄호의 부분이 JVM 과 mapping 이 되는 개념이라고 보면 된다.</p>
<ul>
<li>code</li>
</ul>
<p>말 그대로 code. 이 부분은 개발자가 직접 작성한 code 외에도 기계어로 이루어진 code 들 또한 들어가 있다.</p>
<ul>
<li>data (method area)</li>
</ul>
<p>data 영역, 이 부분은 global, static 변수 등이 포함되어 있으며, 주의해야 할 점은 local variable 은 이곳에 저장되지 않는다는 점이다.</p>
<p><a href="https://www.google.com/search?q=%EC%82%AC%EB%9E%8C%EC%9D%84+%ED%99%94%EB%82%98%EA%B2%8C+%ED%95%98%EB%8A%94+%EB%B0%A9%EB%B2%95+%EB%91%90%EA%B0%80%EC%A7%80&amp;source=lmns&amp;bih=922&amp;biw=1680&amp;client=safari&amp;hl=ko&amp;sa=X&amp;ved=2ahUKEwjMlYLXg8XrAhVZx4sBHcohBcgQ_AUoAHoECAEQAA">그 이유는&hellip;</a></p>
<ul>
<li>stack (jvm stack)</li>
</ul>
<p>local 변수에 대한 저장소이다. 위 data 에서 local 에 대해 저장하지 않는다고 이야기한 이유가 여기에 있다.</p>
<p>global, static 변수와 다르게 관리하는 곳이 있는 이유는
local 의 경우 해당 method 가 끝나고 나서는 다시는 쓰이지 않을 <del>다시 쓰여도 초기화되서 쓰일</del> 변수들이기 때문에 memory를 별도의 동적인 영역으로 만들어 유동적으로 사용하기 위함이다.</p>
<ul>
<li>heap</li>
</ul>
<p>size 가 정해지지 않은 list 와 같이 동적인 memory 가 저장되는 곳이다. 이 또한 stack 과 마찬가지로 동적으로 사용하기 위해 별도로 구성되었는데,
stack 과도 따로 관리가 되는 이유는</p>
<p>stack 은 휘발성으로 한번 사용하고 끝내는 정적 data 이지만 list 와 같은 경우 포인터의 개념으로 주소지에 접근하기 때문에
memory 가 동적으로 관리되어야 했고 이를 위해 별도로 공간을 만들되, 더 이상 참조되지 않는 순간 주기적으로 GC 가 날리는 형식으로 발전하게 되었다.</p>
<h3 id="thread-1">Thread</h3>
<p>이미 앞서 말했듯이 thread 는 process 내의 자원을 공유한다. 고로 구성 자체는 비슷하다. 다만 thread 만 독자적으로 가지는 영역이 있는데 그게 바로 stack 이다.</p>
<p>간단히 생각해보자. code, data(global, static variable), heap(memory address) 의 경우 process 내에서 꾸준히 호출되는 (혹은 호출될 가능성이 있는)
녀석들 뿐이다. 이 값들에 대해 각 thread 별로 별도로 가져간다면 context-switching 때문에 multi-thread 구성을 가져가야 할 이유가 1도 없다.</p>
<p>따라서 이 부분들에 대해서는 각 thread 별로 process의 자원을 공유하고, 이후 각 thread 가 실행하는 method 가 각기 다를 수 있기 때문에
local 변수를 의미하는 stack의 경우만이 thread 별로 별도로 생성된다.</p>
<h2 id="그래서">그래서?</h2>
<p>이와 같이 memory 구조가 이루어져 있기 때문에 개발 시 주의해야 할 점이 있다.</p>
<p>간단한 예로 List 는 편하게 동적으로 사용 할 수 있지만, 항상 동일한 size 가 생성되야 한다면 배열을 통해 memory 이점을 가져 갈 수 있다.</p>
<p>그런거 생각할 바에 빠르게 개발하는게 낫지 않냐 라는 시각이 있을 수 있다. 실제로 이러한 부분들은 엄청난 대용량이 아니면 경험하지 못하기 때문에
항상 신경써야 할 정도로 중요하다고 볼 수 없다.<del>본인도 그렇다</del></p>
<p>다만 습관을 이렇게 들이면 좀 더 compact 한 개발을 할 수 있지 않을까? 노트북은 가벼운걸 좋아하면서 정작 code 가 무겁다면 IDE 가 소모하는 배터리도 무지막지
하고 결국 내가 들고 다니는 무게가 늘어나게 될 것이라 생각하면 당장 혹사 당하는 내 어깨를 위해서라도 내 두뇌를 훈련시켜야 하지 않을까.</p>

    </div>
    <div class="post-footer">
      <div class="info">
        
        
    <span class="separator"><a class="tag" href="/tags/programming/">programming</a></span>

      </div>
    </div>

    
</div>


                </div>
            </div>
        </div>
</body>



<script type="text/javascript" src="https://jungqui.github.io/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js" integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw=" crossorigin="anonymous"></script>




<script type="text/javascript" src="https://jungqui.github.io/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js" integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4=" crossorigin="anonymous"></script>

<script type="text/javascript" src="https://jungqui.github.io/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js" integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro=" crossorigin="anonymous"></script></html></body>

</html>
